{{ define "main" }}
{{ partial "inner-header.html" . }}

<section class="section-padding bg-green-light">
  <div class="container">
    <div class="text-center mb-4">
      <span class="section-tag">In the Press</span>
      <h2 class="section-heading">Media Coverage</h2>
    </div>
    <div class="bg-white p-3 rounded">
      <div class="gallery-grid">
        {{ partial "img.html" (dict "src" "images/media/WNC_Bird_Survey_Indore.jpg" "alt" "WNC Bird Survey Indore" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/WNC_Butterfly_Survey.jpg" "alt" "WNC Butterfly Survey" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/WNC_Photo_Selection_Ritesh_.jpg" "alt" "WNC Photo Selection" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-01.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-02.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-03.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-04.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-05.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-06.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-07.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-08.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-09.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-10.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-11.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/media-coverage-12.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_13.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_14.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_15.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_16.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_17.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_18.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_19.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
        {{ partial "img.html" (dict "src" "images/media/Media_Coverage_20.jpg" "alt" "Media Coverage" "onclick" "openLightbox(this)" "width" 400) }}
      </div>
    </div>
  </div>
</section>

<!-- Lightbox Overlay -->
<div class="lightbox-overlay" id="lightbox" onclick="closeLightbox(event)">
  <button class="lightbox-close" onclick="closeLightbox(event)" aria-label="Close">&times;</button>
  <button class="lightbox-nav lightbox-prev" onclick="navigateLightbox(event, -1)" aria-label="Previous">&lsaquo;</button>
  <img src="" alt="" id="lightboxImg">
  <button class="lightbox-nav lightbox-next" onclick="navigateLightbox(event, 1)" aria-label="Next">&rsaquo;</button>
  <div class="lightbox-caption" id="lightboxCaption"></div>
</div>

<script>
(function() {
  var images = document.querySelectorAll('.gallery-grid img');
  var currentIdx = 0;
  var overlay = document.getElementById('lightbox');
  var lbImg = document.getElementById('lightboxImg');
  var lbCaption = document.getElementById('lightboxCaption');

  window.openLightbox = function(el) {
    images.forEach(function(img, i) { if (img === el) currentIdx = i; });
    showImage();
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  };

  window.closeLightbox = function(e) {
    if (e.target === overlay || e.target.classList.contains('lightbox-close')) {
      overlay.classList.remove('active');
      document.body.style.overflow = '';
    }
  };

  window.navigateLightbox = function(e, dir) {
    e.stopPropagation();
    currentIdx = (currentIdx + dir + images.length) % images.length;
    showImage();
  };

  function showImage() {
    lbImg.src = images[currentIdx].src;
    lbImg.alt = images[currentIdx].alt;
    lbCaption.textContent = images[currentIdx].alt;
  }

  document.addEventListener('keydown', function(e) {
    if (!overlay.classList.contains('active')) return;
    if (e.key === 'Escape') { overlay.classList.remove('active'); document.body.style.overflow = ''; }
    if (e.key === 'ArrowLeft') { currentIdx = (currentIdx - 1 + images.length) % images.length; showImage(); }
    if (e.key === 'ArrowRight') { currentIdx = (currentIdx + 1) % images.length; showImage(); }
  });
})();
</script>
{{ end }}
